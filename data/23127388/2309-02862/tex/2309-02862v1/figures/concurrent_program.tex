\begin{figure}
\centering
\begin{tikzpicture}[xscale=2,yscale=-2]

    \node at (-1, 0) {$\process^1$:};
    \node at ( 2, 0) {$\process^2$:};

    \node (q1) at (0, 0) {$\state_1$};
    \node (q2) at (0, 1) {$\state_2$};
    \node (r1) at (3, 0) {$\rstate_1$};
    \node (r2) at (3, 1) {$\rstate_2$};

    \draw[->] (q1) -- node[right] {$\wr(\xvar, 1)$} (q2);
    \draw[->] (r1) -- node[right] {$\rd(\xvar, 1)$} (r2);

    \draw[->] (q2) to [out=45,in=-45,loop] node[right] {$\nop$} (q2);
    \draw[->] (r1) to [out=45,in=-45,loop] node[right] {$\nop$} (r1);
    \draw[->] (r2) to [out=45,in=-45,loop] node[right] {$\nop$} (r2);

\end{tikzpicture}
\caption{Concurrent program $\program = \tuple{\process^1, \process^2}$}
\label{fig:concurrent-program}
\end{figure}